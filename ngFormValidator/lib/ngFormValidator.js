!function(a){"use strict";a.module("ngFormValidator",[]).directive("validator",function(){function b(a,b){return a.toLowerCase()===b.toLowerCase()||a.toLowerCase()===b.split("-").join("").toLowerCase()}function c(a,c){if(!a)return null;for(var d in a)if(b(d,c))return a[d];return null}function d(a,c){var d=a.attributes;if(!d)return null;for(var e=0;e<d.length;e++){var f=d[e];if(f.name&&b(f.name,c))return d[f.name];if(f.id&&b(f.id,c))return d[f.id]}return null}function e(b,e,f){var g=c(e,"v-input"),h=null;for(var i in f)if(g)g===i&&(h=f[i]);else for(var j=a.element(b).contents(),k=0;k<j.length;k++){var l=j[k],m=d(l,"name");m&&i===m.nodeValue&&(h=f[i])}return h}function f(a,b,d,e,f,g){var h=c(f,a);if(!h&&d.validator){var i=c(d.validator,e.$name);i&&(h=c(i,b)),h||(h=c(d.validator,b))}return h||(h=g),h}function g(a,b,c){return{successStyle:f("v-style-success","successStyle",a,b,c,"has-success has-feedback"),errorStyle:f("v-style-error","errorStyle",a,b,c,"has-error has-feedback"),errorMessageStyle:f("v-style-error-message","errorMessageStyle",a,b,c,"bg-danger")}}function h(a){for(var b=[],c=/([^\[\],]*)(\[([^\[\]]*\])|\[([\'\"](.)*[\'\"])*\])?([,]?)/g,d=c.exec(a);null!==d&&d[0];){var e={type:d[1].toLowerCase(),params:[]};if(d[2])for(var f=d[2].replace("[","").replace("]","").split(","),g=0;g<f.length;g++){var h=f[g].trim();h&&e.params.push({name:h,value:null})}b.push(e),d=c.exec(a)}return b}function i(a,b,c){for(var d=function(a,c){a!==c&&b.$validate()},e=h(c),f=0;f<e.length;f++)for(var g=e[f],i=0;i<g.params.length;i++){var j=g.params[i];"'"!==j.name.charAt(0)&&'"'!==j.name.charAt(0)&&a.$watch(j.name,d)}}function j(a,b){for(var c=h(b),d=0;d<c.length;d++){for(var e=c[d],f=0;f<e.params.length;f++){var g=e.params[f];"'"!==g.name.charAt(0)&&'"'!==g.name.charAt(0)?g.value=a.$eval(g.name):g.value=g.name.replace(/\"/g,"").replace(/\'/g,"")}e.params.length>0&&"boolean"==typeof e.params[0].value?(e.enabled=e.params[0].value,e.params.splice(0,1)):e.enabled=!0}return c}function k(a,b){var c=1===b.length?b[0].value:"This field is required";return a?{valid:!0,message:""}:{valid:!1,message:c}}function l(a,b){if(!b)return{valid:!0,message:""};a||(a="");var c=parseInt(b[0].value),d=b.length>0?parseInt(b[1].value):INT.MAX_VALUE,e=(isNaN(c)||!isNaN(c)&&a.length>=c)&&(isNaN(d)||!isNaN(d)&&a.length<=d),f=b.length>2&&!e?b[2].value:"";return f||e||(f="This field should be ",isNaN(c)||(f+=" minimum length of "+c,isNaN(d)||(f+=" and ")),isNaN(d)||(f+=" maximum length of "+d)),{valid:e,message:f}}function m(a,b){if(!b)return{valid:!0,message:""};a||(a="");var c=parseInt(b[0].value),d=b.length>0?parseInt(b[1].value):INT.MAX_VALUE,e=Number(a),f=!isNaN(e)&&(isNaN(c)||!isNaN(c)&&e>=c)&&(isNaN(d)||!isNaN(d)&&e<=d),g=b.length>2&&!f?b[2].value:"";return g||f||(g="This field should be a number with ",isNaN(c)||(g+=" minimum of "+c,isNaN(d)||(g+=" and ")),isNaN(d)||(g+=" maximum of "+d)),{valid:f,message:g}}function n(a,b){if(!b)return{valid:!0,message:""};a||(a="");var c=new RegExp(b[0].value,"gi"),d=c.test(a),e=b.length>1&&!d?b[1].value:"";return e||d||(e="This field should be a of pattern "+b[0].value),{valid:d,message:e}}function o(a,b){return a||(a=""),n(a,[{value:'^(([^<>()[\\]\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\"]+)*)|(\\".+\\"))@(([^<>()[\\]\\.,;:\\s@\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\"]{2,})$'},{value:b.length>0?b[0].value:"Please enter an email address"}])}function p(a,b){return a||(a=""),n(a,[{value:"(http|ftp|https)://[\\w-]+(\\.[\\w-]+)+([\\w.,@?^=%&amp;:/~+#-]*[\\w@?^=%&amp;/~+#-])?"},{value:b.length>0?b[0].value:"Please enter a URL"}])}function q(a,b,c){if(!b||0===b.length)return{valid:!0,message:""};a||(a="");var d=b[0].value,e=c[d],f="";return e&&(f=e.$modelValue||e.$viewValue),{valid:f===a,message:b.length>1?b[1].value:"The value of this field should be equal to "+d}}function r(a,b,c){return c&&0!==c.length?(b||(b=""),a[c[0].value](b)):{valid:!0,message:""}}function s(a,b){if(a.classList)for(var c=b.split(" "),d=0;d<c.length;d++){var e=c[d];a.classList.contains(e)&&a.classList.remove(e)}}function t(a,b){a.classList||(a.classList={});for(var c=b.split(" "),d=0;d<c.length;d++){var e=c[d];a.classList.contains(e)||a.classList.add(e)}}function u(a,b,c){s(a,b.successStyle),s(a,b.errorStyle),c.validationCount>0&&t(a,c.valid?b.successStyle:b.errorStyle)}function v(a,b,c,d){if(a.$validationErrorElement&&(b.removeChild(a.$validationErrorElement),a.$validationErrorElement=null),!d.valid){var e=document.createElement("p");t(e,c.errorMessageStyle),e.innerHTML=d.message,a.$validationErrorElement=e,b.appendChild(e)}}return{require:["^form"],link:function(a,b,d,f){if(0!==f.length&&0!==b.length){b=b[0],f=f[0];var h=g(a,f,d),s=c(d,"validator");s=s||"";var t=e(b,d,f);i(a,t,s),t.$validators.validator=function(c,d){for(var e=c||d,g=j(a,s),i={validationCount:0,valid:!0,message:""},w=0;w<g.length;w++){var x=g[w];if(x.enabled){var y=null;switch(x.type){case"required":y=k(e,x.params);break;case"string":y=l(e,x.params);break;case"number":y=m(e,x.params);break;case"regex":y=n(e,x.params);break;case"email":y=o(e,x.params);break;case"url":y=p(e,x.params);break;case"equalto":y=q(e,x.params,f);break;case"custom":y=r(a,e,x.params)}y&&(i.validationCount+=1,i.valid=i.valid&y.valid,i.message+=i.message?"<br/>":"",i.message+=y.message)}}return t.$dirty&&(u(b,h,i),v(t,b,h,i)),!!i.valid}}}}})}(angular);